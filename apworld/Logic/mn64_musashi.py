"""Logic file for Musashi."""

from .mn64_logic_classes import MN64DoorType, MN64HintRegion, MN64Items, MN64Levels, MN64LocationLogic, MN64Region, MN64TransitionFront

LogicRegions = {
    "MusashiBeach": MN64Region(
        name="Musashi Beach",
        hint_name=MN64HintRegion.MUSASHI,
        level=MN64Levels.MUSASHI,
        locations=[
            MN64LocationLogic(
                "Silver Fortune Doll",
                lambda l: True,
                MN64Items.SILVER_FORTUNE_DOLL,
                flag_id=0x00DC,
                instance_id=0x0B,
            ),
        ],
        exits=[
            MN64TransitionFront("SuperPassBridge", lambda l: l.superpass),
            MN64TransitionFront("TunneltoNortheast1", lambda l: l.sudden_impact and l.goemon),
            MN64TransitionFront("MusashiTunnel", lambda l: True),
        ],
        room_id=0x130,
        room_default_definitions=[
            0x483,
            0x054,
            0x073,
            0x05D,
            0x07A,
            0x3DB,
            0x191,
            0x152,
            0x020,
            0x197,
            0x159,
            0x206,
            0x161,
            0x207,
            0x2D2,
            0x02B,
            0x1FB,
            0x16F,
            0x033,
            0x1FA,
            0x2AF,
            0x2B9,
            0x195,
            0x01A,
            0x038,
            0x01E,
            0x2C9,
            0x1FD,
            0x156,
        ],
        enemies={0x11: 0x0FC, 0x12: 0x0FC, 0x13: 0x0FC, 0x14: 0x0FC},
    ),
    "MusashiTunnel": MN64Region(
        name="Musashi Tunnel",
        hint_name=MN64HintRegion.MUSASHI,
        level=MN64Levels.MUSASHI,
        locations=[],
        exits=[
            MN64TransitionFront("MusashiBeach", lambda l: True),
            MN64TransitionFront("Iga", lambda l: True),
        ],
        # TODO: The dump reports no enemies in this room when we know there is
        room_id=0x131,
        room_default_definitions=[
            0x073,
            0x48D,
            0x191,
            0x152,
            0x020,
            0x197,
            0x159,
            0x198,
            0x2D3,
            0x02B,
            0x1FB,
            0x16F,
            0x3DC,
        ],
    ),
    "TunneltoNortheast1": MN64Region(
        name="Tunnel to Northeast 1",
        hint_name=MN64HintRegion.MUSASHI,
        level=MN64Levels.MUSASHI,
        locations=[
            MN64LocationLogic(
                "Golden Health",
                lambda l: True,
                MN64Items.GOLDEN_HEALTH,
                instance_id=0x13,
            ),
        ],
        exits=[
            MN64TransitionFront("MusashiBeach", lambda l: l.sudden_impact and l.goemon),
            MN64TransitionFront("TunneltoNortheast2", lambda l: True),
        ],
        room_id=0x14F,
        room_default_definitions=[
            0x073,
            0x3FD,
            0x191,
            0x152,
            0x212,
            0x161,
            0x2EF,
            0x1AC,
            0x02B,
            0x1FB,
            0x16F,
            0x02C,
            0x1AA,
            0x038,
            0x020,
            0x198,
            0x159,
            0x19F,
            0x023,
            0x1D4,
            0x01A,
            0x192,
            0x01C,
            0x1A2,
        ],
        enemies={
            0x0B: 0x0FD,
            0x0C: 0x0FD,
            0x0D: 0x130,
            0x0E: 0x130,
            0x10: 0x148,
            0x11: 0x148,
            0x12: 0x148,
        },
    ),
    "TunneltoNortheast2": MN64Region(
        name="Tunnel to Northeast 2",
        hint_name=MN64HintRegion.MUSASHI,
        level=MN64Levels.MUSASHI,
        locations=[
            MN64LocationLogic(
                "Silver Fortune Doll",
                lambda l: True,
                MN64Items.SILVER_FORTUNE_DOLL,
                flag_id=0x00EA,
                instance_id=0x20,
            ),
            MN64LocationLogic(
                "Normal Health",
                lambda l: True,
                MN64Items.NORMAL_HEALTH,
                instance_id=0x21,
            ),
            MN64LocationLogic(
                "Golden Health",
                lambda l: True,
                MN64Items.GOLDEN_HEALTH,
                instance_id=0x24,
            ),
        ],
        exits=[
            MN64TransitionFront("TunneltoNortheast1", lambda l: True),
            MN64TransitionFront("MutsuCrossroads", lambda l: True),
        ],
        room_id=0x150,
        room_default_definitions=[
            0x073,
            0x05D,
            0x07A,
            0x3FE,
            0x191,
            0x152,
            0x212,
            0x161,
            0x2F0,
            0x02C,
            0x1AA,
            0x1AC,
            0x02B,
            0x1FB,
            0x16F,
            0x032,
            0x1AD,
            0x01E,
            0x2C9,
            0x038,
            0x020,
            0x198,
            0x159,
            0x19F,
            0x023,
            0x1D4,
            0x01A,
            0x01C,
            0x1A2,
            0x192,
        ],
        enemies={
            0x16: 0x0FD,
            0x17: 0x0FD,
            0x18: 0x130,
            0x19: 0x130,
            0x1A: 0x130,
            0x1B: 0x130,
            0x1C: 0x130,
            0x1D: 0x130,
            0x1E: 0x148,
            0x1F: 0x148,
        },
    ),
    "Iga": MN64Region(
        name="Iga",
        hint_name=MN64HintRegion.OEDO_TOWN,
        level=MN64Levels.OEDO_TOWN,
        locations=[
            MN64LocationLogic(
                "Golden Health",
                lambda l: True,
                MN64Items.GOLDEN_HEALTH,
                instance_id=0x0C,
            ),
            # MN64LocationLogic("Triton Shell", lambda l: True, MN64Items.TRITON_HORN, save_id=0xF4, flag_id=0x099),
        ],
        exits=[
            MN64TransitionFront("MusashiTunnel", lambda l: True),
            MN64TransitionFront("ZazenTownEntrance", lambda l: True, type=MN64DoorType.DOOR),
        ],
        room_id=0x132,
        room_default_definitions=[
            0x181,
            0x131,
            0x065,
            0x2B9,
            0x325,
            0x329,
            0x3DD,
            0x48E,
            0x191,
            0x152,
            0x2D4,
            0x046,
            0x02D,
            0x2B2,
            0x171,
            0x02B,
            0x1FB,
            0x16F,
            0x01A,
            0x192,
            0x020,
            0x197,
            0x159,
        ],
        enemies={0x08: 0x0FB, 0x09: 0x0FB, 0x0A: 0x0FB, 0x0B: 0x0FB, 0x0F: 0x0FC},
    ),
}
